<!DOCTYPE html>
<!--suppress HtmlRequiredAltAttribute -->
<html data-bs-theme="dark" lang="en">

<head>
    <meta charset="UTF-8">
    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <title>SCR Danger Zone</title>
    <link href="styles/bootstrap.css" rel="stylesheet">
    <link href="styles/reset.css" rel="stylesheet">
    <link href="styles/index.css" rel="stylesheet">
    <link href="styles/notification.css" rel="stylesheet">
      <link href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" rel="stylesheet"
  />
    <link href="assets/scr_icon.png" rel="icon" sizes="32x32" type="image/png">
</head>

<body>
<nav class="navbar navbar-expand-lg bg-body-tertiary">
    <div class="container-fluid">
        <img alt="" class="d-inline-block align-top logo" height="45"
             src="assets/SCR_Gear_23_Wide_White_on_Transparent.png" width="90">
        <ul class="nav nav-underline">
            <li class="nav-item">
                <a class="nav-link active" data-page-id="dashboard">Dashboard</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" data-page-id="vision">Vision</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" data-page-id="logging">Logging</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" data-page-id="configuration">Configuration</a>
            </li>

            <li class="nav-item">
                <a class="nav-link" data-page-id="preferences">Preferences</a>
            </li>

        </ul>
        <a class="navbar-brand test">
            <h4>Twistopher</h4>
        </a>
    </div>
</nav>

<main id="main" style="display: none;">
    <div class="page" data-type="columns" id="dashboard">
        <div class="col" id="General Settings">
            <div class="divider">
                <h3>General</h3>
            </div>
            <div class="section">
                <h5>State: <span id="var_system_state"></span></h5>
                <h5>Mode: <span id="var_system_mode"></span></h5>
                <h5>Mobility: <span id="var_system_mobility"></span></h5>
            </div>

            <div class="divider">
                <h3>Motors</h3>
            </div>
            <div class="section">
                <h5>Forward/Angular Velocity: <span id="var_motors_velocity"></span></h5>
                <h5>Delta X/Y/Theta: <span id="var_motors_feedback"></span></h5>
            </div>

            <div class="divider">
                <h3>Position</h3>
            </div>
            <div class="section">
                <h5>Local: <span id="var_position_origin"></span></h5>
                <h5>Global: <span id="var_position_global"></span></h5>
            </div>

            <div class="divider">
                <h3>GPS</h3>
            </div>
            <div class="section">
                <h5>Latitude/Longitude: <span id="var_gps_position"></span></h5>
                <h5>Current Fix: <span id="var_gps_fix"></span></h5>
                <h5>Is Fixed: <span id="var_gps_fixed"></span></h5>
                <h5>Satellites: <span id="var_gps_satellites"></span></h5>
            </div>

            <div class="divider">
                <h3>IMU</h3>
            </div>
            <div class="section">
                <h5>Angular Velocity: <span id="var_imu_angular"></span></h5>
                <h5>Acceleration <span id="var_imu_acceleration"></span></h5>
                <h5>Yaw/Pitch/Roll: <span id="var_imu_orientation"></span></h5>
            </div>

            <div class="divider">
                <h3>Path Planning</h3>
            </div>
            <div class="section">
                <h5>Waypoint Delay: <span id="var_astar_time"></span></h5>
                <h5>Desired Heading: <span id="var_astar_heading"></span></h5>
                <h5>Target Waypoint: <span id="var_astar_waypoint"></span></h5>
                <h5>Distance to Waypoint: <span id="var_astar_distance"></span></h5>
                <h5>Waypoints: <span id="var_astar_waypoints"></span></h5>
            </div>

            <div class="divider">
                <h3>System</h3>
            </div>

            <div class="section gap flex-column">
                <div class="dropdown" data-target="system_state">
                    <button aria-expanded="false" class="btn btn-secondary dropdown-toggle" data-bs-toggle="dropdown"
                            id="dropdown_system_state" type="button">
                        System State
                    </button>
                    <ul aria-labelledby="dropdown_system_state" class="dropdown-menu">
                        <li><a class="dropdown-item" data-value="0">Disabled</a></li>
                        <li><a class="dropdown-item" data-value="1">Autonomous</a></li>
                        <li><a class="dropdown-item" data-value="2">Manual</a></li>
                        <li><a class="dropdown-item" data-value="3">Shutdown</a></li>
                    </ul>
                </div>

                <div class="dropdown" data-target="system_mode">
                    <button aria-expanded="false" class="btn btn-secondary dropdown-toggle" data-bs-toggle="dropdown"
                            id="dropdown_system_mode" type="button">
                        System Mode
                    </button>
                    <ul aria-labelledby="dropdown_system_mode" class="dropdown-menu">
                        <li><a class="dropdown-item" data-value="0">Competition</a></li>
                        <li><a class="dropdown-item" data-value="1">Simulation</a></li>
                        <li><a class="dropdown-item" data-value="2">Practice</a></li>
                    </ul>
                </div>

                <div class="form-check">
                    <input class="form-check-input" id="checkbox_system_mobility" type="checkbox" value="">
                    <label class="form-check-label" for="checkbox_system_mobility">
                        Mobility
                    </label>
                </div>
            </div>

        </div>
        <div class="col" id="vtest">
            <div style="text-align: center;"  class="divider">
                <h3>Vision</h3>
            </div>
            <div class="section" id="images">
                <!-- TODO Can I make this auto width/height? So it will resize when I take out other parts? -->
                <div class="roww">
                    <div class="text-center">
                        <h6>Right Camera</h6>
                        <img class="target_raw_camera_right" data-type="regular">
                    </div>
                    <div class="text-center">
                        <h6>Left Camera</h6>
                        <img class="target_raw_camera_left" data-type="regular">
                    </div>
                </div>
                <div class="roww">
                    <div class="text-center">
                        <h6>Front Camera</h6>
                        <img class="target_raw_camera_front" data-type="small">
                    </div>
                    <div class="text-center">
                        <h6>Back Camera</h6>
                        <img class="target_raw_camera_back" data-type="small">
                    </div>
                </div>
                <div class="roww">
                    <div class="text-center">
                        <h6>Combined View</h6>
                        <img class="target_combined" data-type="small">
                    </div>
                    <div class="text-center">
                        <h6>Feelers</h6>
                        <img class="target_feelers" data-type="small">
                    </div>
                </div>
            </div>
        </div>
        <div class="col" id="Device State Column">
            <div class="divider">
                <h3>Device States</h3>
            </div>
            <div class="section">
                <div id="element_device_states">
                </div>
            </div>

            <div class="divider">
                <h3>System Statistics</h3>
            </div>
            <div class="section">
                <h5>CPU Usage: <span id="var_nuc_cpu">0%</span></h5>
                <h5>Memory Usage: <span id="var_nuc_memory">0%</span></h5>
                <h5>Disk Usage: <span id="var_nuc_disk">0%</span></h5>
            </div>

            <div class="divider">
                <h3>Performance</h3>
            </div>
            <div class="section">
                <h5>FPS: <span id="var_performance_fps">0</span></h5>
                <h5>Latency: <span id="var_performance_latency">0 ms</span></h5>
            </div>

            <div class="divider">
                <h3>Safety</h3>
            </div>
            <div class="section">
                <h5>Safety Lights: <span id="var_safety_lights">Off</span></h5>
            </div>

            <div class="divider">
                <h3>Sensors</h3>
            </div>
            <div class="section">
                <h5>Ultrasonics: <span id="var_ultrasonics">[]</span></h5>
            </div>

            <div class="divider">
                <h3>Controller</h3>
            </div>
            <div class="section">
                <h5>Buttons: <span id="var_controller_buttons">[]</span></h5>
                <h5>Axes: <span id="var_controller_axes">[]</span></h5>
            </div>

            <div class="divider">
                <h3>PID Statistics</h3>
            </div>
            <div class="section">
                <h5>Linear Error: <span id="var_linear_pid_error">0</span></h5>
                <h5>Linear Output: <span id="var_linear_pid_output">0</span></h5>
                <h5>Angular Error: <span id="var_angular_pid_error">0</span></h5>
                <h5>Angular Output: <span id="var_angular_pid_output">0</span></h5>
            </div>

            <div class="divider">
                <h3>Motor Statistics</h3>
            </div>
            <div class="section">
                <h5>Front Motors: <span id="var_motor_statistics_front">N/A</span></h5>
                <h5>Back Motors: <span id="var_motor_statistics_back">N/A</span></h5>
            </div>

            <div class="divider">
                <h3>CAN Statistics</h3>
            </div>
            <div class="section">
                <h5>CAN Stats: <span id="var_can_stats">N/A</span></h5>
                <h5>Zero Encoders: <span id="var_zero_encoders">N/A</span></h5>
            </div>

            <div class="divider">
                <h3>Configuration</h3>
            </div>
            <div class="section">
                <h5>Broadcast: <span id="var_configuration_broadcast">N/A</span></h5>
                <h5>Update: <span id="var_configuration_update">N/A</span></h5>
                <h5>Presets Load: <span id="var_config_presets_load">N/A</span></h5>
                <h5>Presets Save: <span id="var_config_presets_save">N/A</span></h5>
            </div>

            <div class="divider">
                <h3>Other</h3>
            </div>
            <div class="section">
                <h5>Broadcast: <span id="var_broadcast">N/A</span></h5>
                <h5>Conbus Instruction: <span id="var_conbus_instruction">N/A</span></h5>
                <h5>Audible Feedback: <span id="var_audible_feedback">N/A</span></h5>
            </div>
        </div>
    </div>
    <div class="page" id="configuration">
        <div class="d-flex justify-content-center mb-3">
            <div class="flex-column" style="border: 1px solid rgba(255,255,255,0); padding: 10px;">
                <h3 style="text-align: center">Connection</h3>

                <div class="connectionPortInput">
                    <!-- Input box for IP and Port -->
                    <div class="d-flex justify-content-center mb-3 connecting-input">
                        <div class="input-group-prepend">
                            Port:
                            <input aria-label="Port" class="form-control" id="input_port" placeholder="8080" type="text"
                                   value="8080" style="width: 100px;">
                        </div>

                        <div class="input-group-prepend">
                            Host IP:<!--Theres an issue with 127.0.0.0, todo test to fix this eventually-->
                            <input aria-label="Address" class="form-control" id="input_host" placeholder="127.0.0.1"
                                   type="text"
                                   value="127.0.0.1" style="width: 110px;">
                        </div>
                    </div>
                </div>
            </div>

            <div class="d-flex justify-content-center mb-3">
                <div class="flex-column">
                    <h2 style="text-align: center">Presets</h2>
                    <div id="controls">
                        <h4 id="active_preset_header" style="text-align: center">
                            Active Preset: <span id="active_preset_value">None</span>
                        </h4>
                        <div class="controls-row">
                            <button class="btn btn-outline-success" id="save_preset_as" type="button">Save As</button>
                            <input aria-label="Configuration Name" class="form-control" id="preset_save_name"
                                   placeholder="Configuration Name"
                                   type="text">
                        </div>
                        <div class="controls-row">
                            <button class="btn btn-outline-primary" id="save_preset_mode" type="button">Save Mode
                            </button>
                            <button class="btn btn-outline-danger" id="delete_preset" type="button">Delete Preset
                            </button>
                        </div>
                        <div class="dropdown" data-target="preset">
                            <button aria-expanded="false" class="btn btn-secondary dropdown-toggle"
                                    data-bs-toggle="dropdown"
                                    id="dropdown_config" type="button">
                                Load Preset
                            </button>
                            <ul aria-labelledby="dropdown_preset" class="dropdown-menu" id="dropdown_elements">
                                <!-- Preset items will be dynamically populated by JavaScript -->
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Device Configuration Section -->
        <div class="row">
            <div class="col-12">
                <h3 class="mb-3">Device Configuration</h3>
            </div>
        </div>

        <div class="row" data-type="columns">
            <!-- Vision Transformer Column -->
            <div class="col-md-3">
                <div class="card mb-4">
                    <div class="card-header">
                        <h5 class="card-title">Vision Transformer</h5>
                    </div>
                    <div class="card-body">
                        <div class="form-group mb-3">
                            <label for="region_of_disinterest_offset">Region of Disinterest Offset</label>
                            <input type="number" class="form-control" id="region_of_disinterest_offset" min="0" max="100" step="1">
                        </div>

                        <div class="card mb-3">
                            <div class="card-header">
                                <h6>Lower Thresholds</h6>
                            </div>
                            <div class="card-body">
                                <div class="form-group mb-2">
                                    <label for="lower_hue">Lower Hue Threshold</label>
                                    <input type="number" class="form-control" id="lower_hue" min="0" max="255" step="1" placeholder="0-255">
                                </div>
                                <div class="form-group mb-2">
                                    <label for="lower_saturation">Lower Saturation Threshold</label>
                                    <input type="number" class="form-control" id="lower_saturation" min="0" max="255" step="1" placeholder="0-255">
                                </div>
                                <div class="form-group mb-2">
                                    <label for="lower_value">Lower Value Threshold</label>
                                    <input type="number" class="form-control" id="lower_value" min="0" max="255" step="1" placeholder="0-255">
                                </div>
                            </div>
                        </div>

                        <div class="card mb-3">
                            <div class="card-header">
                                <h6>Upper Thresholds</h6>
                            </div>
                            <div class="card-body">
                                <div class="form-group mb-2">
                                    <label for="upper_hue">Upper Hue Threshold</label>
                                    <input type="number" class="form-control" id="upper_hue" min="0" max="255" step="1" placeholder="0-255">
                                </div>
                                <div class="form-group mb-2">
                                    <label for="upper_saturation">Upper Saturation Threshold</label>
                                    <input type="number" class="form-control" id="upper_saturation" min="0" max="255" step="1" placeholder="0-255">
                                </div>
                                <div class="form-group mb-2">
                                    <label for="upper_value">Upper Value Threshold</label>
                                    <input type="number" class="form-control" id="upper_value" min="0" max="255" step="1" placeholder="0-255">
                                </div>
                            </div>
                        </div>

                        <div class="card mb-3">
                            <div class="card-header">
                                <h6>Blurring</h6>
                            </div>
                            <div class="card-body">
                                <div class="form-group mb-2">
                                    <label for="blur">Blur Radius</label>
                                    <input type="number" class="form-control" id="blur" min="0" max="100" step="1">
                                </div>
                                <div class="form-group mb-2">
                                    <label for="blur_iterations">Blur Iterations</label>
                                    <input type="number" class="form-control" id="blur_iterations" min="0" max="100" step="1">
                                </div>
                            </div>
                        </div>

                        <div class="d-grid gap-2">
                            <button class="btn btn-secondary" id="reset_vision_transformer">Reset</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- A* Navigation Column -->
            <div class="col-md-3">
                <div class="card mb-4">
                    <div class="card-header">
                        <h5 class="card-title">A* Navigation</h5>
                    </div>
                    <div class="card-body">
                        <div class="form-group mb-3">
                            <label for="latitude_length">Latitude Length</label>
                            <input type="number" class="form-control" id="latitude_length" min="0" max="1000000" step="0.1" value="111086.2">
                        </div>

                        <div class="form-group mb-3">
                            <label for="longitude_length">Longitude Length</label>
                            <input type="number" class="form-control" id="longitude_length" min="0" max="1000000" step="0.1" value="91978.2">
                        </div>

                        <div class="form-group mb-3">
                            <label for="waypoint_pop_distance">Waypoint Pop Distance</label>
                            <input type="number" class="form-control" id="waypoint_pop_distance" min="0" max="1000" step="0.1" value="1.0">
                        </div>

                        <div class="form-group mb-3">
                            <label for="waypoint_delay">Waypoint Delay</label>
                            <input type="number" class="form-control" id="waypoint_delay" min="0" max="1000" step="0.1" value="10">
                        </div>

                        <div class="form-group mb-3">
                            <label for="robot_y">Robot Y Offset</label>
                            <input type="number" class="form-control" id="robot_y" min="-1000" max="1000" step="1" value="70">
                        </div>

                        <div class="form-check mb-3">
                            <input type="checkbox" class="form-check-input" id="use_only_waypoints">
                            <label class="form-check-label" for="use_only_waypoints">Use Only Waypoints</label>
                        </div>

                        <div class="d-grid gap-2">
                            <button class="btn btn-secondary" id="reset_astar_navigation">Reset</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Path Resolver Column -->
            <div class="col-md-3">
                <div class="card mb-4">
                    <div class="card-header">
                        <h5 class="card-title">Path Resolver</h5>
                    </div>
                    <div class="card-body">
                        <div class="form-group mb-3">
                            <label for="forward_speed">Forward Speed</label>
                            <input type="number" class="form-control" id="forward_speed" min="-10" max="10" step="0.1" value="0.5">
                        </div>

                        <div class="form-group mb-3">
                            <label for="reverse_speed">Reverse Speed</label>
                            <input type="number" class="form-control" id="reverse_speed" min="-10" max="10" step="0.1" value="-0.5">
                        </div>

                        <div class="form-group mb-3">
                            <label for="angular_aggressiveness">Angular Aggressiveness</label>
                            <input type="number" class="form-control" id="angular_aggressiveness" min="0.1" max="100.0" step="0.1" value="1.0">
                        </div>

                        <div class="form-group mb-3">
                            <label for="max_angular_speed">Max Angular Speed</label>
                            <input type="number" class="form-control" id="max_angular_speed" min="0.1" max="10.0" step="0.1" value="1.0">
                        </div>

                        <div class="card mb-3">
                            <div class="card-header">
                                <h6>Pure Pursuit</h6>
                            </div>
                            <div class="card-body">
                                <div class="form-group mb-2">
                                    <label for="radius_multiplier">Radius Multiplier</label>
                                    <input type="number" class="form-control" id="radius_multiplier" min="0.1" value="1.0">
                                </div>
                                <div class="form-group mb-2">
                                    <label for="radius_max">Max Radius</label>
                                    <input type="number" class="form-control" id="radius_max" min="0.1" value="1.0">
                                </div>
                                <div class="form-group mb-2">
                                    <label for="radius_start">Start Radius</label>
                                    <input type="number" class="form-control" id="radius_start" min="0.1" value="0.5">
                                </div>
                            </div>
                        </div>

                        <div class="d-grid gap-2">
                            <button class="btn btn-secondary" id="reset_path_resolver">Reset</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Position Filters Column -->
            <div class="col-md-3">
                <div class="card mb-4">
                    <div class="card-header">
                        <h5 class="card-title">Position Filters</h5>
                    </div>
                    <div class="card-body">
                        <div class="form-group mb-3">
                            <label for="filter_latitude_length">Latitude Length</label>
                            <input type="number" class="form-control" id="filter_latitude_length" min="0" max="1000000" step="0.1" value="111086.2">
                        </div>

                        <div class="form-group mb-3">
                            <label for="filter_longitude_length">Longitude Length</label>
                            <input type="number" class="form-control" id="filter_longitude_length" min="0" max="1000000" step="0.1" value="91978.2">
                        </div>

                        <div class="form-group mb-3">
                            <label for="filter_type">Filter Type</label>
                            <select class="form-select" id="filter_type">
                                <option value="0">Dead Reckoning</option>
                                <option value="1">Particle Filter</option>
                                <option value="2">Bearing Filter</option>
                            </select>
                        </div>

                        <div class="d-grid gap-2">
                            <button class="btn btn-secondary" id="reset_position_filters">Reset</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="page" id="preferences">
        <div class="divider">
            <h3>General</h3>
        </div>
        <div class="dropdown" data-target="theme">
            <button aria-expanded="false" class="btn btn-secondary dropdown-toggle" data-bs-toggle="dropdown"
                    id="dropdown_theme" type="button">
                Theme
            </button>
            <ul aria-labelledby="dropdown_theme" class="dropdown-menu">
                <li><a class="dropdown-item" data-value="light">Light</a></li>
                <li><a class="dropdown-item" data-value="dark">Dark</a></li>
            </ul>
        </div>

        <div class="dropdown" data-target="gpsformat">
            <button aria-expanded="false" class="btn btn-secondary dropdown-toggle" data-bs-toggle="dropdown"
                    id="dropdown_gpsformat" type="button">
                GPS Format
            </button>
            <ul aria-labelledby="dropdown_gpsformat" class="dropdown-menu">
                <li><a class="dropdown-item" data-value="DMS">Degrees Minutes Seconds</a></li>
                <li><a class="dropdown-item" data-value="DMM">Decimal Minutes</a></li>
                <li><a class="dropdown-item" data-value="DD">Decimal Degrees</a></li>
            </ul>
        </div>
    </div>
    <div class="page" id="logging">
        <div class="row">
            <div class="col-md-4">
                <div class="card mb-4">
                    <div class="card-header">
                        <h5 class="card-title">Log Files</h5>
                        <button class="btn btn-primary btn-sm" id="refresh_log_files" type="button">
                            Refresh
                        </button>
                    </div>
                    <div class="card-body">
                        <div class="list-group" id="log_files_list">
                            <!-- Log files will be listed here -->
                            <div class="text-center">
                                <p>Loading log files...</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-8">
                <div class="card">
                    <div class="card-header">
                        <h5 class="card-title" id="log_file_title">Log File Content</h5>
                    </div>
                    <div class="card-body">
                        <div id="log_file_content">
                            <!-- Log file content will be displayed here -->
                            <p class="text-center">Select a log file to view its content</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="page" id="performance">
        <div class="divider">
            <h3>Inflation</h3>
        </div>
        <div class="section gap flex-column">
            <h5>Latest: <span id="var_inflation_time_latest">0.0</span></h5>
            <h5>Average: <span id="var_inflation_time_average">0.0</span></h5>
            <h5>Max: <span id="var_inflation_time_max">0.0</span></h5>
            <canvas id="inflation_performance_canvas"></canvas>
        </div>
    </div>
    <div class="page" id="vision">
        <div class="divider">
            <h3>Camera Feeds</h3>
        </div>
        <div class="section">
            <div class="mb-3">
                <h5 class="text-center">Left Camera</h5>
                <img class="target_raw_camera_left" data-type="fullwidth">
            </div>
            <div class="mb-3">
                <h5 class="text-center">Right Camera</h5>
                <img class="target_raw_camera_right" data-type="fullwidth">
            </div>
            <div class="mb-3">
                <h5 class="text-center">Front Camera</h5>
                <img class="target_raw_camera_front" data-type="fullwidth">
            </div>
            <div class="mb-3">
                <h5 class="text-center">Back Camera</h5>
                <img class="target_raw_camera_back" data-type="fullwidth">
            </div>
            <div class="mb-3">
                <h5 class="text-center">Combined View</h5>
                <img class="target_combined" data-type="fullwidth">
            </div>
            <div class="mb-3">
                <h5 class="text-center">Feelers</h5>
                <img class="target_feelers" data-type="fullwidth">
            </div>
        </div>
    </div>
</main>

<footer>

</footer>

<script src="vendor/eventemitter2.min.js"></script>
<script src="vendor/roslib.min.js"></script>
<script src="vendor/bootstrap.js"></script>
<script src="vendor/jquery.js"></script>
<script src="scripts/tabs.js"></script>
<script src="scripts/globals.js"></script>
<script src="scripts/utilities.js"></script>
<script src="scripts/main.js"></script>
<script src="scripts/pageNavigator.js"></script>
<script src="scripts/connectingNotification.js"></script>
<script src="scripts/logging.js"></script>
</body>

</html>
